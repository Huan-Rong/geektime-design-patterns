# 6 OOP 四大特性

> OOP 是一种编程风格或编程范式。

> OOP 是一种武器，是代码设计和实现的基石。

对于四大特性，尽管大部分面向对象编程语言都提供了相应的语法机制来支持，但不同的编程语言实现这四大特性的语法机制可能会有所不同。

## 封装

封装，也称为**信息隐藏**或者**数据访问保护**，通过暴露有限的访问接口（或称为函数），来让外部访问内部信息或数据。

封装这个特性，需要编程语言本身提供一定的语法机制来支持。这个语法机制就是**访问权限控制**。在 Java 中，`private`、`public` 就是访问权限控制语法。`private` 关键字修饰的属性只能类本身访问，可以保护属性不被类之外的代码直接访问。

### 封装的意义

如果没有封装，那么就意味着属性可以被随意地以各种奇葩的方式修改，并且修改的逻辑可能散落在代码的各个角落，这样一来，势必**会影响代码的可读性、可维护性**。

另外，随意地修改属性，可能会导致一些隐藏的 bug 产生而不被发现，比如，`balance` 和 `balanceLastModifiedTime` 的数据可能不一致了。

另外，**封装能够提高代码的易用性**。当没有封装时，所有的属性都暴露给调用者，调用者想要正确地使用操作这些属性，就势必要对业务细节有足够的了解，而这对调用者来说就是一种负担。

## 抽象

**封装关心的是如何隐藏信息、保护数据，而抽象讲的是如何隐藏方法的具体实现，让调用者只需要关心方法提供了哪些功能，并不需要知道这些功能是如何实现的。**

在面向对象编程中，常借助接口类或抽象类这两种语法机制来实现抽象这一特性。

但实际上，抽象这个特性是非常容易实现的，并非必须得依靠接口类或抽象类这些特殊的语法机制来支持。之所以这么说，是因为类的方法是通过编程语言中的**函数**这一语法机制来实现的。**通过函数包裹具体的实现逻辑，然后对外提供函数声明、注释或文档来让调用者了解函数的功能，这本身就是一种抽象。**

抽象是一种非常通用的设计思想，并且不需要提供特殊的语法机制来支持，在 OOP 中并没有表现出很强的“特异性”。因此，抽象有时候并不被看作 OOP 的特性之一。

### 抽象的意义

**抽象和封装都是人类处理复杂性的有效手段。**抽象作为一种只关注功能点不关注实现的设计思路，能够帮助我们的大脑过滤掉许多非必要的信息。**

另外，抽象作为一种非常宽泛的设计思想，在代码设计中，起到非常重要的指导作用。

## 继承

**继承用来表示类之间的 **is-a**关系。继承这个特性需要编程语言提供特殊的语法机制来支持，比如 Java 提供了 `extends` 关键字来实现继承，C++ 则使用冒号。继承分为单继承和多继承，并不是所有的语言都支持这两种继承关系。

### 继承的意义

继承最大的好处就是代码复用。但是代码复用也可以通过其他方式来解决，比如利用组合关系而不是继承关系。

但是继承这个特性的缺点也非常明显。过渡使用继承，继承层次过深过复杂，就会导致代码可读性、可维护性变差。

为了了解一个类的功能，不仅需要查看这个类的代码，还需要查看其各级父类的代码。

父类和子类高度耦合，修改父类的代码，会直接影响到子类。

## 多态

多态指的是父类引用指向子类对象，并且在运行时调用执行子类对象的方法。多态这种特性也需要编程语言提供特殊的语法机制来实现。Java 使用了三个语法机制来实现多态。

* 继承
* 子类可以重写父类中的方法，即 override。
* 父类引用指向子类对象

除了这种「继承+方法重写」的方式来实现多态之外，还有两种比较常见的实现方式。

* 使用接口类语法
* 使用 duck-typing 语法

其中，duck-typing 只有一些动态语言才支持，比如 Python、JavaScript。

### 多态的意义

多态能够提高代码的可扩展性和复用性。另外，多态还是很多设计模式、设计原则、编程技巧的代码实现基础。比如，策略模式、基于接口而非实现编程、依赖倒置原则、里式替换原则、利用多态去掉冗长的 if-else 语句等等。

## 精选留言
### Java 不支持多重继承
Java 不支持多重继承的原因：多重继承有副作用：钻石问题(菱形继承)。

假设类 B 和类 C 继承自类 A，且都重写了类 A 中的同一个方法，而类 D 同时继承了类 B 和类 C，那么此时类 D 会继承 B、C 的方法，那对于 B、C 重写的 A 中的方法，类 D 会继承哪一个呢？这里就会产生歧义。

考虑到这种二义性问题，Java 不支持多重继承。但是 Java 支持多接口实现，因为接口中的方法，是抽象的（从JDK1.8之后，接口中允许给出一些默认方法的实现，这里不考虑这个），就算一个类实现了多个接口，且这些接口中存在某个同名方法，但是我们在实现接口的时候，这个同名方法需要由我们这个实现类自己来实现，所以并不会出现二义性的问题。


### 我关于 Java 中多继承的思考。

从 OOP 的角度来向，继承的目的是为了代码复用。但在 Java 中，多继承会有钻石问题。当 B 类、C 类都继承 A 类、并且都重写了 A 类中的某一个方法，那么当 D 类同时继承 B 类、C 类时，D 类继承的是哪个类的实现。

而 Java 允许实现多接口的原因是，接口中的方法都是抽象的。
